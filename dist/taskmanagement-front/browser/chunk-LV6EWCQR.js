import{a as P,b as x,c as E,d as y,f as D,g as I,h as S,l as w,n as k}from"./chunk-6WTLAR56.js";import{a as N}from"./chunk-FDL334H3.js";import{a as A}from"./chunk-XF56FPVL.js";import{c as F,d as O}from"./chunk-7R7WLGXG.js";import{G as g,H as b,K as p,L as n,M as i,N as s,P as c,T as h,V as a,W as u,ma as C,sa as _,ua as M,w as t,y as m,z as v}from"./chunk-Q353D5L7.js";import{d as z}from"./chunk-KAT7YFEL.js";var d=z(A());function G(l,e){l&1&&(n(0,"div",6),a(1," El nombre es obligatorio. "),i())}var R=class l{constructor(e,r,o,f){this.fb=e;this.developerService=r;this.router=o;this.route=f}developerForm;isEdit=!1;developerId=null;ngOnInit(){this.developerId=this.route.snapshot.params.id?+this.route.snapshot.params.id:null,this.isEdit=!!this.developerId,this.initForm(),this.isEdit&&this.loadDeveloper()}initForm(){this.developerForm=this.fb.group({name:["",x.required]})}isInvalid(e){let r=this.developerForm.get(e);return!!r&&r.invalid&&(r.dirty||r.touched)}loadDeveloper(){this.developerId&&this.developerService.getById(this.developerId).subscribe({next:e=>{this.developerForm.patchValue({name:e.name})},error:e=>this.showError(e)})}onSubmit(){if(this.developerForm.invalid){this.developerForm.markAllAsTouched(),d.default.fire("Error","Por favor complete el nombre.","error");return}let e=this.developerForm.value;this.isEdit&&this.developerId?this.developerService.update(this.developerId,e).subscribe({next:()=>{d.default.fire("Actualizado","El desarrollador fue actualizado correctamente.","success"),this.router.navigate(["/developers"])},error:r=>this.showError(r)}):this.developerService.create(e).subscribe({next:()=>{d.default.fire("Creado","El desarrollador fue creado correctamente.","success"),this.router.navigate(["/developers"])},error:r=>this.showError(r)})}cancel(){this.router.navigate(["/developers"])}showError(e){let r=e?.error?.detail||e?.error?.message||e?.message||"Error inesperado";d.default.fire("Error",r,"error")}static \u0275fac=function(r){return new(r||l)(m(w),m(N),m(M),m(_))};static \u0275cmp=v({type:l,selectors:[["app-developer-form"]],decls:16,vars:7,consts:[[1,"developer-form-container"],[1,"title"],["novalidate","",3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["id","name","formControlName","name","type","text"],[1,"form-error"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(r,o){r&1&&(s(0,"app-navbar"),n(1,"div",0)(2,"h2",1),a(3),i(),n(4,"form",2),c("ngSubmit",function(){return o.onSubmit()}),n(5,"div",3)(6,"label",4),a(7,"Nombre"),i(),s(8,"input",5),g(9,G,2,0,"div",6),i(),n(10,"div",7)(11,"button",8),a(12),i(),n(13,"button",9),c("click",function(){return o.cancel()}),a(14,"Cancelar"),i()()()(),s(15,"app-footer")),r&2&&(t(3),u(o.isEdit?"Editar Desarrollador":"Nuevo Desarrollador"),t(),p("formGroup",o.developerForm),t(4),h("error",o.isInvalid("name")),t(),b(o.isInvalid("name")?9:-1),t(2),p("disabled",o.developerForm.invalid),t(),u(o.isEdit?"Actualizar":"Crear"))},dependencies:[C,k,D,P,E,y,I,S,F,O],styles:[".developer-form-container[_ngcontent-%COMP%]{max-width:500px;margin:2.5rem auto;background:#fff;border-radius:1.5rem;box-shadow:0 4px 16px #1e293b14;padding:2.5rem 2rem}.title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1e293b;margin-bottom:2rem;text-align:center}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.3rem;margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#4a5568}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.6rem .9rem;border:1px solid #cbd5e1;border-radius:7px;font-size:1rem;background:#f7fafc;transition:border .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#4f46e5;outline:none}.form-error[_ngcontent-%COMP%]{color:#ef4444;font-size:.95rem;margin-top:.2rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1.5rem}.btn-primary[_ngcontent-%COMP%]{background:#4f46e5;color:#fff;border:none;border-radius:.5rem;padding:.7rem 1.5rem;font-weight:600;font-size:1rem;cursor:pointer;transition:background .2s}.btn-primary[_ngcontent-%COMP%]:hover{background:#3730a3}.btn-secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#1e293b;border:none;border-radius:.5rem;padding:.7rem 1.5rem;font-weight:600;font-size:1rem;cursor:pointer;transition:background .2s}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e5e7eb}@media (max-width: 600px){.developer-form-container[_ngcontent-%COMP%]{padding:1.2rem .5rem}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}}.loading[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#4f46e5;font-weight:500}.loading-spinner[_ngcontent-%COMP%]{width:1.2rem;height:1.2rem;border:2px solid #c7d2fe;border-top:2px solid #4f46e5;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.alert[_ngcontent-%COMP%]{padding:1rem;border-radius:.5rem;margin-bottom:1rem;font-weight:500}.alert-success[_ngcontent-%COMP%]{background:#dcfce7;color:#166534;border:1px solid #bbf7d0}.alert-error[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b;border:1px solid #fecaca}"]})};export{R as DeveloperFormComponent};
