import{a as G,c as H,e as Y,i as q,j as J,k as K,m as Q}from"./chunk-6WTLAR56.js";import{a as U}from"./chunk-S6LUAGNY.js";import{a as Z}from"./chunk-OR4RGIIA.js";import{a as X}from"./chunk-FDL334H3.js";import{a as et}from"./chunk-XF56FPVL.js";import{c as A,d as j}from"./chunk-7R7WLGXG.js";import{D as T,I as w,J as y,K as k,L as i,M as r,N as _,O as P,P as d,Q as g,T as M,U as E,V as o,W as p,X as D,Y as h,Z as b,_ as C,aa as L,ba as F,ca as I,ja as N,ka as V,la as z,m,ma as B,n as u,o as x,p as v,ua as R,va as W,w as l,y as f,z as S}from"./chunk-Q353D5L7.js";import{d as tt}from"./chunk-KAT7YFEL.js";var O=tt(et());var nt=c=>["/tasks/edit",c],it=(c,t)=>t.id;function rt(c,t){if(c&1){let e=P();i(0,"tr")(1,"td"),o(2),r(),i(3,"td"),o(4),r(),i(5,"td")(6,"span",20),o(7),r()(),i(8,"td"),o(9),r(),i(10,"td"),o(11),F(12,"date"),r(),i(13,"td",21)(14,"a",22),x(),i(15,"svg",23),_(16,"path",24)(17,"path",25),r()(),v(),i(18,"button",26),d("click",function(){let s=m(e).$implicit,a=g();return u(a.deleteTask(s.id))}),x(),i(19,"svg",23),_(20,"path",27)(21,"path",28),r()()()()}if(c&2){let e=t.$implicit;l(2),p(e.title),l(2),p(e.description),l(2),E(e.status.toLowerCase()),l(),D(" ",e.status," "),l(2),p(e.developerName||"Sin asignar"),l(2),p(I(12,8,e.startDate,"short")),l(3),k("routerLink",L(11,nt,e.id))}}function ot(c,t){if(c&1){let e=P();i(0,"button",30),d("click",function(){let s=m(e).$implicit,a=g(2);return u(a.goToPage(s))}),o(1),r()}if(c&2){let e=t.$implicit,n=g(2);M("active",n.currentPage===e),l(),p(e)}}function at(c,t){if(c&1){let e=P();i(0,"div",29)(1,"button",30),d("click",function(){m(e);let s=g();return u(s.goToPage(1))}),o(2,"\xAB"),r(),T(3,ot,2,3,"button",31),i(4,"button",30),d("click",function(){m(e);let s=g();return u(s.goToPage(s.totalPages))}),o(5,"\xBB"),r()()}if(c&2){let e=g();l(),M("active",e.currentPage===1),l(2),k("ngForOf",e.pagesArray()),l(),M("active",e.currentPage===e.totalPages)}}var $=class c{constructor(t,e,n,s){this.taskService=t;this.notificationService=e;this.developerService=n;this.router=s}tasks=[];filteredTasks=[];searchTerm="";statusFilter="";startDateFilter="";endDateFilter="";currentPage=1;pageSize=7;totalPages=1;ngOnInit(){this.loadTasks()}loadTasks(){this.taskService.getAll().subscribe({next:t=>{this.tasks=Array.isArray(t)?t:t.content,this.filterTasks()},error:t=>console.error("Error loading tasks:",t)})}filterTasks(){this.filteredTasks=this.tasks.filter(t=>{let e=!this.searchTerm||t.title.toLowerCase().includes(this.searchTerm.toLowerCase())||t.description.toLowerCase().includes(this.searchTerm.toLowerCase()),n=!this.statusFilter||t.status===this.statusFilter,s=!this.startDateFilter||new Date(t.startDate)>=new Date(this.startDateFilter),a=!this.endDateFilter||new Date(t.startDate)<=new Date(this.endDateFilter);return e&&n&&s&&a}),this.currentPage=1,this.updatePagination()}paginatedTasks(){let t=(this.currentPage-1)*this.pageSize;return this.filteredTasks.slice(t,t+this.pageSize)}updatePagination(){this.totalPages=Math.ceil(this.filteredTasks.length/this.pageSize)||1}pagesArray(){return Array.from({length:this.totalPages},(t,e)=>e+1)}goToPage(t){t<1||t>this.totalPages||(this.currentPage=t)}goToCreate(){this.router.navigate(["/tasks/new"])}goToEdit(t){this.router.navigate(["/tasks/edit",t.id])}deleteTask(t){O.default.fire({title:"\xBFEst\xE1s seguro?",text:"Esta acci\xF3n no se puede deshacer",icon:"warning",showCancelButton:!0,confirmButtonColor:"#4f46e5",cancelButtonColor:"#d33",confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.taskService.delete(t).subscribe({next:()=>{this.tasks=this.tasks.filter(n=>n.id!==t),this.filterTasks(),O.default.fire("Eliminado","La tarea fue eliminada correctamente.","success")},error:n=>{O.default.fire("Error","No se pudo eliminar la tarea.","error"),console.error("Error deleting task:",n)}})})}clearFilters(){this.searchTerm="",this.statusFilter="",this.startDateFilter="",this.endDateFilter="",this.filterTasks()}static \u0275fac=function(e){return new(e||c)(f(U),f(Z),f(X),f(R))};static \u0275cmp=S({type:c,selectors:[["app-task-list"]],decls:50,vars:5,consts:[[1,"task-list-container"],[1,"task-list-header"],[1,"task-list-actions"],["routerLink","/tasks/new",1,"btn","btn-primary"],["routerLink","/tasks/upload",1,"btn","btn-secondary"],[1,"task-list-filters"],[1,"search-box"],["type","text","placeholder","Buscar tareas...",3,"ngModelChange","input","ngModel"],[1,"filter-group"],[3,"ngModelChange","change","ngModel"],["value",""],["value","PENDING"],["value","IN_PROGRESS"],["value","COMPLETED"],["type","date","placeholder","Fecha inicio",3,"ngModelChange","change","ngModel"],["type","date","placeholder","Fecha fin",3,"ngModelChange","change","ngModel"],[1,"btn","btn-secondary",3,"click"],[1,"table-container"],[1,"table"],["class","pagination",4,"ngIf"],[1,"status-badge"],[1,"actions-cell"],[1,"btn","btn-icon",3,"routerLink"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],[1,"btn","btn-icon","btn-danger",3,"click"],["d","M3 6h18"],["d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],[1,"pagination"],[1,"pagination-btn",3,"click"],["class","pagination-btn",3,"active","click",4,"ngFor","ngForOf"]],template:function(e,n){e&1&&(_(0,"app-navbar"),i(1,"div",0)(2,"div",1)(3,"h1"),o(4,"Gesti\xF3n de Tareas"),r(),i(5,"div",2)(6,"a",3),o(7,"Nueva Tarea"),r(),i(8,"a",4),o(9,"Importar Excel"),r()()(),i(10,"div",5)(11,"div",6)(12,"input",7),C("ngModelChange",function(a){return b(n.searchTerm,a)||(n.searchTerm=a),a}),d("input",function(){return n.filterTasks()}),r()(),i(13,"div",8)(14,"select",9),C("ngModelChange",function(a){return b(n.statusFilter,a)||(n.statusFilter=a),a}),d("change",function(){return n.filterTasks()}),i(15,"option",10),o(16,"Todos los estados"),r(),i(17,"option",11),o(18,"Pendientes"),r(),i(19,"option",12),o(20,"En Progreso"),r(),i(21,"option",13),o(22,"Completadas"),r()()(),i(23,"div",8)(24,"input",14),C("ngModelChange",function(a){return b(n.startDateFilter,a)||(n.startDateFilter=a),a}),d("change",function(){return n.filterTasks()}),r()(),i(25,"div",8)(26,"input",15),C("ngModelChange",function(a){return b(n.endDateFilter,a)||(n.endDateFilter=a),a}),d("change",function(){return n.filterTasks()}),r()(),i(27,"button",16),d("click",function(){return n.clearFilters()}),o(28,"Limpiar filtros"),r()(),i(29,"div",17)(30,"table",18)(31,"thead")(32,"tr")(33,"th"),o(34,"T\xEDtulo"),r(),i(35,"th"),o(36,"Descripci\xF3n"),r(),i(37,"th"),o(38,"Estado"),r(),i(39,"th"),o(40,"Desarrollador"),r(),i(41,"th"),o(42,"Fecha"),r(),i(43,"th"),o(44,"Acciones"),r()()(),i(45,"tbody"),w(46,rt,22,13,"tr",null,it),r()()(),T(48,at,6,5,"div",19),r(),_(49,"app-footer")),e&2&&(l(12),h("ngModel",n.searchTerm),l(2),h("ngModel",n.statusFilter),l(10),h("ngModel",n.startDateFilter),l(2),h("ngModel",n.endDateFilter),l(20),y(n.paginatedTasks()),l(2),k("ngIf",n.totalPages>1))},dependencies:[B,N,V,z,Q,J,K,G,q,H,Y,W,A,j],styles:[".task-list-container[_ngcontent-%COMP%]{background:#fff;border-radius:2rem;box-shadow:0 8px 32px #3c48641f;padding:2.5rem 2rem 120px;margin:2.5rem auto;max-width:1150px}.task-list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2.2rem}.task-list-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.3rem;font-weight:800;color:#22223b;letter-spacing:-1px}.task-list-actions[_ngcontent-%COMP%]{display:flex;gap:1.2rem}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4f46e5 60%,#5f27cd);color:#fff;border:none;border-radius:.7rem;padding:.7rem 1.5rem;font-weight:700;font-size:1.05rem;cursor:pointer;transition:background .2s,box-shadow .2s;display:flex;align-items:center;gap:.6rem;box-shadow:0 2px 8px #4f46e514}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#3730a3 60%,#4b1fa5);box-shadow:0 4px 16px #4f46e51f}.btn-secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#1e293b;border:none;border-radius:.7rem;padding:.7rem 1.5rem;font-weight:700;font-size:1.05rem;cursor:pointer;transition:background .2s,box-shadow .2s;display:flex;align-items:center;gap:.6rem}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e5e7eb;box-shadow:0 2px 8px #1e293b14}.task-list-filters[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1.7rem;flex-wrap:wrap;align-items:center}.task-list-filters[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%], .task-list-filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;height:48px}.task-list-filters[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .task-list-filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .task-list-filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{height:48px;font-size:1rem;border-radius:.5rem;border:1px solid #cbd5e1;background:#f7fafc;transition:border .2s;box-sizing:border-box}.task-list-filters[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:0 1rem 0 2.5rem}.task-list-filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:0 2.5rem 0 1rem}.task-list-filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{padding:0 1rem;color:#22223b}.task-list-filters[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .task-list-filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:focus{border-color:#4f46e5;outline:none}.task-list-filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:focus{background:#fff}.task-list-filters[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);color:#6b7280;font-size:1.1rem}.table-container[_ngcontent-%COMP%]{overflow-x:auto;background:#fff;border-radius:1.2rem;box-shadow:0 2px 12px #1e293b0f}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:transparent;font-size:1.05rem}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;background:#f3f4f6;color:#1e293b;font-weight:800;z-index:2;border-bottom:2px solid #e5e7eb}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1.1rem 1rem;text-align:left;border-bottom:1px solid #e5e7eb}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n)   td[_ngcontent-%COMP%]{background:#f8fafc}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#eef2ff;transition:background .2s}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:.35rem 1.1rem;border-radius:1.2rem;font-size:1rem;font-weight:700;background:#f3f4f6;color:#4b5563;text-transform:capitalize;letter-spacing:.5px;box-shadow:0 1px 4px #1e293b0a}.status-badge.PENDING[_ngcontent-%COMP%]{background:#fef9c3;color:#b45309}.status-badge.IN_PROGRESS[_ngcontent-%COMP%]{background:#dbeafe;color:#2563eb}.status-badge.COMPLETED[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.action-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;color:#4f46e5;font-size:1.2rem;margin-right:.5rem;transition:color .2s;display:inline-flex;align-items:center;justify-content:center;width:2.2rem;height:2.2rem;border-radius:.5rem}.action-btn[_ngcontent-%COMP%]:last-child{margin-right:0}.action-btn[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#3730a3}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.5rem;margin-top:2rem}.pagination-btn[_ngcontent-%COMP%]{background:#f3f4f6;color:#1e293b;border:none;border-radius:.5rem;padding:.5rem 1rem;font-weight:500;cursor:pointer;transition:background .2s}.pagination-btn.active[_ngcontent-%COMP%], .pagination-btn[_ngcontent-%COMP%]:hover{background:#4f46e5;color:#fff}@media (max-width: 900px){.task-list-container[_ngcontent-%COMP%]{padding:1.5rem 1rem}.task-list-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}.task-list-actions[_ngcontent-%COMP%], .task-list-filters[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem}.task-list-filters[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%], .task-list-filters[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .task-list-filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{width:100%}}"]})};export{$ as TaskListComponent};
