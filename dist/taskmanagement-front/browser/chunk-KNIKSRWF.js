import{a as T}from"./chunk-OR4RGIIA.js";import{a as y}from"./chunk-FDL334H3.js";import"./chunk-XF56FPVL.js";import{c as V,d as I}from"./chunk-7R7WLGXG.js";import{D as S,K as f,L as i,M as r,N as _,O as g,P as v,Q as D,R as C,V as n,X as x,ka as b,m as p,ma as E,n as s,ua as w,va as F,w as d,y as m,z as h}from"./chunk-Q353D5L7.js";import"./chunk-KAT7YFEL.js";function U(c,t){if(c&1){let e=g();i(0,"div",12)(1,"p",13),n(2),r(),i(3,"button",14),v("click",function(){p(e);let a=D();return s(a.uploadFile())}),n(4),r()()}if(c&2){let e=D();d(2),x("Archivo seleccionado: ",e.selectedFile.name),d(),f("disabled",e.uploading),d(),x(" ",e.uploading?"Subiendo...":"Subir Archivo"," ")}}var k=class c{constructor(t,e,l){this.developerService=t;this.notificationService=e;this.router=l}selectedFile=null;uploading=!1;onFileSelected(t){let e=t.target;e.files?.length&&(this.selectedFile=e.files[0])}onDragOver(t){t.preventDefault(),t.stopPropagation()}onDrop(t){t.preventDefault(),t.stopPropagation();let e=t.dataTransfer?.files;e?.length&&(this.selectedFile=e[0])}uploadFile(){if(!this.selectedFile)return;this.uploading=!0;let t=new FormData;t.append("file",this.selectedFile),this.developerService.uploadExcel(t).subscribe({next:()=>{this.notificationService.showSuccess("Desarrolladores importados correctamente"),setTimeout(()=>{this.router.navigate(["/developers"])},2e3)},error:e=>{this.notificationService.showError("Error al importar desarrolladores: "+e.message),this.uploading=!1}})}static \u0275fac=function(e){return new(e||c)(m(y),m(T),m(w))};static \u0275cmp=h({type:c,selectors:[["app-developer-upload"]],decls:18,vars:1,consts:[["fileInput",""],[1,"card"],[1,"card-header"],[1,"card-title"],["routerLink","/developers",1,"btn","btn-secondary"],[1,"card-body"],[1,"file-upload",3,"click","dragover","drop"],["type","file","accept",".xlsx,.xls",3,"change"],[1,"text-center"],[1,"mb-4"],[1,"text-sm","text-gray-500"],["class","mt-4",4,"ngIf"],[1,"mt-4"],[1,"mb-2"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(e,l){if(e&1){let a=g();_(0,"app-navbar"),i(1,"div",1)(2,"div",2)(3,"h2",3),n(4,"Cargar Desarrolladores desde Excel"),r(),i(5,"a",4),n(6," Volver a Desarrolladores "),r()(),i(7,"div",5)(8,"div",6),v("click",function(){p(a);let o=C(10);return s(o.click())})("dragover",function(o){return p(a),s(l.onDragOver(o))})("drop",function(o){return p(a),s(l.onDrop(o))}),i(9,"input",7,0),v("change",function(o){return p(a),s(l.onFileSelected(o))}),r(),i(11,"div",8)(12,"p",9),n(13,"Arrastra y suelta un archivo Excel aqu\xED o haz clic para seleccionar"),r(),i(14,"p",10),n(15,"Formatos soportados: .xlsx, .xls"),r()()(),S(16,U,5,3,"div",11),r()(),_(17,"app-footer")}e&2&&(d(16),f("ngIf",l.selectedFile))},dependencies:[E,b,F,V,I],encapsulation:2})};export{k as DeveloperUploadComponent};
